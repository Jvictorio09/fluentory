<nav class="sticky top-0 z-50 backdrop-blur-xl border-b transition-all duration-300" style="background-color: var(--navbar-bg); border-color: var(--border-primary); box-shadow: var(--navbar-shadow);">
    <style>
        /* Premium logo handling */
        html[data-theme="dark"] .admin-logo,
        .theme-dark .admin-logo {
            filter: none;
            opacity: 1;
        }
        
        html[data-theme="light"] .admin-logo,
        .theme-light .admin-logo {
            filter: brightness(0) saturate(100%) invert(8%) sepia(25%) saturate(1500%) hue-rotate(145deg) brightness(0.7);
            opacity: 1;
        }
        
        .admin-logo {
            transition: filter 0.3s ease, opacity 0.3s ease;
        }
    </style>
    <div class="px-6 sm:px-8 lg:px-10 py-4 sm:py-5 flex items-center justify-between">
        <div class="flex items-center gap-4 sm:gap-6">
            <a href="/admin/dashboard/" class="text-xl sm:text-2xl font-semibold transition-all duration-300" style="color: var(--text-primary);" onmouseover="this.style.color='var(--accent-primary)'" onmouseout="this.style.color='var(--text-primary)'">Fluentory Admin</a>
        </div>
        
        <div class="flex items-center gap-3 sm:gap-4">
            {% include 'partials/theme_toggle.html' %}
            <div class="hidden sm:block text-sm font-light" style="color: var(--text-secondary);">Admin User</div>
            <div class="w-9 h-9 sm:w-10 sm:h-10 rounded-full border transition-all duration-300" style="background-color: var(--bg-elevated); border-color: var(--border-primary);"></div>

            <!-- Admin Switch View -->
            <div class="relative ml-2" id="admin-switch-view">
                <button id="admin-switch-view-btn" aria-haspopup="true" aria-expanded="false" aria-controls="admin-switch-view-menu" class="hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300" style="background-color: rgba(130, 194, 147, 0.1); border: 1px solid rgba(130, 194, 147, 0.2); color: var(--accent-primary);" onmouseover="this.style.backgroundColor='rgba(130, 194, 147, 0.2)'; this.style.borderColor='rgba(130, 194, 147, 0.3)'" onmouseout="this.style.backgroundColor='rgba(130, 194, 147, 0.1)'; this.style.borderColor='rgba(130, 194, 147, 0.2)'">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Switch View</span>
                    <i class="fas fa-chevron-down text-xs ml-1" aria-hidden="true"></i>
                </button>
                <div id="admin-switch-view-menu" role="menu" aria-labelledby="admin-switch-view-btn" class="absolute right-0 top-full mt-2 w-44 backdrop-blur-xl rounded-lg border opacity-0 invisible transition-all duration-300 z-50" style="background-color: var(--dropdown-bg); border-color: var(--border-primary); box-shadow: var(--card-shadow-hover); transform-origin: top right;">
                    <a role="menuitem" href="{% url 'dashboard:switch_role' %}?role=admin_dashboard" class="block px-4 py-2 text-sm transition-all duration-200" style="color: var(--text-primary);" onmouseover="this.style.backgroundColor='var(--bg-elevated)'" onmouseout="this.style.backgroundColor='transparent'">Admin</a>
                    <a role="menuitem" href="{% url 'dashboard:switch_role' %}?role=student" class="block px-4 py-2 text-sm transition-all duration-200" style="color: var(--text-primary);" onmouseover="this.style.backgroundColor='var(--bg-elevated)'" onmouseout="this.style.backgroundColor='transparent'">Student</a>
                    <a role="menuitem" href="{% url 'dashboard:switch_role' %}?role=teacher" class="block px-4 py-2 text-sm transition-all duration-200" style="color: var(--text-primary);" onmouseover="this.style.backgroundColor='var(--bg-elevated)'" onmouseout="this.style.backgroundColor='transparent'">Teacher</a>
                    <a role="menuitem" href="{% url 'dashboard:switch_role' %}?role=partner" class="block px-4 py-2 text-sm transition-all duration-200" style="color: var(--text-primary);" onmouseover="this.style.backgroundColor='var(--bg-elevated)'" onmouseout="this.style.backgroundColor='transparent'">Partner</a>
                </div>
            </div>

            <a href="{% url 'logout' %}" class="ml-4 inline-flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300" style="color: #ef4444; background-color: rgba(239, 68, 68, 0.1);" onmouseover="this.style.backgroundColor='rgba(239, 68, 68, 0.15)'" onmouseout="this.style.backgroundColor='rgba(239, 68, 68, 0.1)'">
                <i class="fas fa-sign-out-alt"></i>
                <span class="hidden sm:inline">Logout</span>
            </a>
        </div>
    </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function () {
    var btn = document.getElementById('admin-switch-view-btn');
    var menu = document.getElementById('admin-switch-view-menu');
    if (!btn || !menu) return;

    function openMenu(){
        menu.classList.remove('opacity-0','invisible');
        menu.classList.add('opacity-100','visible');
        btn.setAttribute('aria-expanded','true');
    }
    function closeMenu(){
        menu.classList.remove('opacity-100','visible');
        menu.classList.add('opacity-0','invisible');
        btn.setAttribute('aria-expanded','false');
    }

    btn.addEventListener('click', function(e){
        e.stopPropagation();
        var isOpen = btn.getAttribute('aria-expanded') === 'true';
        if (isOpen) closeMenu(); else openMenu();
    });

    menu.addEventListener('click', function(e){ e.stopPropagation(); });
    document.addEventListener('click', function(){ closeMenu(); });
    document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closeMenu(); });
});
</script>

